<main class="container">
    <section class="mt-5">
        <h2>Enlever du stock</h2>
        <!-- Formulaire -->
        <form action="rem" method="post">
            
            <div class="form-row">
                <div class="col">
                    <input type="text" class="form-control" id="insert-code" name="code" aria-describedby="code" placeholder="Entrez votre code" required>
                </div>
                <div class="col">
                    <input type="text" class="form-control" id="actual-qty" name="" aria-describedby="qty" placeholder="Qty" readonly>
                </div>
              </div>
            <div class="form-group">
                <input type="text" class="form-control" id="actual-description" name="" aria-describedby="description" placeholder="Description" readonly>
            </div>
            <div class="form-group">
                <label for="insert-qty">Quantit√©</label>
                <input type="text" class="form-control" id="insert-qty" name="qty" aria-describedby="qty" placeholder="1">
            </div>
            <button type="submit" class="btn btn-success" name="go">Enlever</button>
        </form>
    </section>
</main>
<script type="text/javascript">
$("#insert-code").blur(function(){
    console.log("blahblah")

    $.ajax({
            url:"/api/getinfos",
            method:"POST",

            data:{
                code: $("#insert-code").val(),
            },
            success:function(response) {
                obj = JSON.parse(response)
                if (obj.error == null) {
                    $("#actual-description").attr("placeholder", obj.description);
                    $("#actual-qty").attr("placeholder", obj.quantity);
                }
                else {
                    $("#actual-description").attr("placeholder", "Description ?");
                    $("#actual-qty").attr("placeholder", "Qty ?");
                }
            },
            error:function(){
                $("#actual-description").attr("placeholder", "Description ?");
                $("#actual-qty").attr("placeholder", "Qty ?");
        }
        })
});
</script>